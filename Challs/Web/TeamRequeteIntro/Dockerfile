# 1Ô∏è‚É£ Utilisation de l'image officielle Node.js
FROM node:slim

# 2Ô∏è‚É£ D√©finir le dossier de travail dans le conteneur
WORKDIR /app

# 3Ô∏è‚É£ Copier package.json, package-lock.json et tsconfig.json
COPY package.json package-lock.json tsconfig.json ./

# 4Ô∏è‚É£ Installer les d√©pendances
RUN npm install

# Installer typescript
RUN npm install -g typescript

# 5Ô∏è‚É£ Copier le reste du code (√©viter les node_modules et dist)
COPY . .

# 6Ô∏è‚É£ V√©rification du contenu de dist/ avant de compiler
RUN ls -l dist/

# 7Ô∏è‚É£ Compiler TypeScript
RUN npm run build


# 9Ô∏è‚É£ Exposer le port 3050
EXPOSE 3050

# üîü Ajouter un point d'entr√©e pour d√©marrer le serveur
CMD ["node", "dist/server.js"]
